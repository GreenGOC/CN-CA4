# Network Congestion Simulation with RED Algorithm

This project is a simple network simulator implemented in C++ using the Qt Framework. It demonstrates the Random Early Detection (RED) algorithm for intelligent congestion management in a network consisting of two sender computers, one receiver computer, and a router.

## Project Structure

The project is designed modularly with the following key classes:

- **Node**: An abstract base class defining common functionalities for all network nodes (e.g., PCs and Router).
- **PC**: Represents computers in the network. Responsible for generating packets using a Poisson distribution and handling packet sending/receiving, including congestion signals.
- **Router**: Represents the router in the network, implementing the RED algorithm to manage its buffer and prevent congestion.
- **Link**: Connects two nodes, handling packet transmission between them.
- **Packet**: A simple data structure (`struct`) representing packets transmitted in the network.
- **Network**: The main class that sets up the network topology, connects nodes, and manages the simulation.

## Implementation Details

### 1. RED Algorithm

The RED algorithm is implemented in the `Router` class. It calculates the probability of dropping packets based on the buffer size using the following piecewise function:

- If `buffer_size < MIN_THRESHOLD`, drop probability = 0.
- If `MIN_THRESHOLD <= buffer_size <= MAX_THRESHOLD`, drop probability increases linearly.
- If `buffer_size >= MAX_THRESHOLD`, drop probability = 1.

This logic is implemented in the `Router::runRED()` function and used in `Router::receivePacket()` to decide whether to forward or drop incoming packets.

### 2. Packet Generation with Poisson Distribution

Packets are generated by sender PCs (PC1 and PC2) using an **Exponential Distribution** to model the inter-arrival time of packets, which aligns with a Poisson process. This ensures realistic packet generation as specified in the project requirements.

### 3. Congestion Management and Signal Handling

The project includes a mechanism for congestion signaling between the router and sender PCs:

- **Router (router.cpp)**: When the buffer size reaches or exceeds `MAX_THRESHOLD` (100% drop probability), the router sends a congestion signal to the senders. This signal is a packet with `destId = -1` (a convention for congestion signals), implemented in `Router::sendCongestionSignal()`.
- **PC (pc.cpp)**: The `PC::receivePacket()` method identifies congestion signals (packets with `destId = -1`). Upon receiving such a signal, the PC sets a random `congestionWaitTime` (between 0.5 and 2.0 time units). The `PC::sendPacket()` method checks `congestionWaitTime` before sending packets; if positive, the PC pauses packet transmission and reduces the wait time until it reaches zero, resuming transmission thereafter.

## Design Considerations

- **destId in Router**: The `Router::sendPacket()` method does not use `destId` and sets it to `-1` by default to maintain compatibility with the `Node` class interface, as noted in `router.h`.
- **ARPTable**: Both `Node` and `Router` use `std::vector<std::pair<int, int>>` for `ARPTable` to store destination and output link information, enabling simple static routing.
- **Modularity**: The project is structured to separate concerns, with each class handling specific responsibilities for flexibility and maintainability.

## How to Run

To execute the simulation, compile and run the `main.cpp` file. The simulation sets up the network topology as specified and runs for 100 time units:

1. **PC1 and PC2** generate and send packets to the router using a Poisson distribution.
2. The **Router** receives packets, applies the RED algorithm, and either forwards them to **PC3** or drops them.
3. If congestion occurs, the router sends congestion signals to PC1 and PC2, causing them to pause packet transmission for a random duration.

## Requirements

- **C++ Compiler** with support for C++11 or later.
- **Qt Framework** for the projectâ€™s dependencies.
- Ensure all source files (`node.h`, `pc.cpp`, `router.cpp`, `link.cpp`, `packet.h`, `network.cpp`, `main.cpp`) are included in the project.

## Notes

- The simulation assumes a static network topology as defined in `main.cpp`.
- The RED algorithm parameters (`MIN_THRESHOLD`, `MAX_THRESHOLD`) are configurable in the `Router` class for experimentation.